<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Login AWS</title>
  <style>
  </style>
</head>
<body>
  <div class="navbar">
    <div class="logo">Sistema de Login AWS</div>
    <div>
      <a href="login.html">Login</a>
      <a href="register.html">Cadastro</a>
      <a href="users.html">Lista</a>

      <link rel="stylesheet" href="style.css">
    </div>
  </div>

  <main>
    <section>
      <h1>Sobre o Projeto</h1>
      <p>
        Sistema de cadastro e login com <strong>JWT</strong> para gerenciamento de sessão, desenvolvido em <strong>Golang</strong>.
      </p>
      <p>
        O sistema foi implantado na <strong>AWS</strong>, utilizando uma arquitetura totalmente automatizada para gerenciar o deploy e a orquestração do ambiente.
      </p>
    </section>


  <section class="test-now">
    <h2>Testar Agora</h2>
    <p>Experimente o sistema em ação. Faça login, cadastre-se ou veja todos os usuários já registrados.</p>
    <div class="buttons">
      <a href="login.html" class="btn">Login</a>
      <a href="register.html" class="btn">Cadastrar</a>
      <a href="users.html" class="btn btn-secondary">Listar Usuários</a>
    </div>

  </section>

    <section>
      <h2>Visualização do Processo</h2>
      <img src="./image.png" alt="Diagrama de arquitetura do sistema" />
    </section>

    <section>
      <h2>Serviços AWS Utilizados</h2>
      <ul>
        <li><strong>EC2 (x2)</strong> – Uma instância para o <strong>front-end</strong> (porta 80 pública) e outra para o <strong>back-end</strong> (apenas recebe requisições do front-end e tem porta privada para deploy).</li>
        <li><strong>Lambda</strong> – Função que inicia o processo de deploy automático na EC2.</li>
        <li><strong>ECR</strong> – Repositório onde as imagens Docker são armazenadas, geradas via <strong>GitHub Actions</strong>.</li>
        <li><strong>EventBridge</strong> – Detecta novas imagens no ECR e aciona a função Lambda.</li>
        <li><strong>RDS (PostgreSQL)</strong> – Responsável pela persistência de dados, em subnet privada da mesma VPC.</li>
      </ul>
    </section>

    <section>
      <h2>Estratégia de Branching (Git Flow Simplificado)</h2>
      <table>
        <thead>
          <tr><th>Branch</th><th>Propósito</th><th>Regra de Uso</th></tr>
        </thead>
        <tbody>
          <tr><td><code>dev</code></td><td>Desenvolvimento ativo e novas funcionalidades.</td><td>Única branch com commits diretos.</td></tr>
          <tr><td><code>test</code></td><td>Ambiente de testes e integração.</td><td>Recebe apenas merges da <code>dev</code>.</td></tr>
          <tr><td><code>master</code></td><td>Base de produção e geração da imagem Docker.</td><td>Recebe apenas merges automáticos da <code>test</code>.</td></tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>Pipeline de Integração Contínua (CI) – GitHub Actions</h2>
      <p>O pipeline é acionado automaticamente quando ocorre um merge de <code>dev</code> → <code>test</code>.</p>

      <table>
        <thead>
          <tr><th>Etapa</th><th>Ação</th><th>Resultado</th></tr>
        </thead>
        <tbody>
          <tr><td>1. Testes</td><td>Executa testes de unidade e integração.</td><td>Pipeline continua.</td></tr>
          <tr><td>2. Merge Automático</td><td>Se todos os testes passarem, merge automático de <code>test</code> → <code>master</code>.</td><td>Código pronto para produção.</td></tr>
          <tr><td>3. Build e Containerização</td><td>Gera a imagem Docker.</td><td>Imagem pronta localmente.</td></tr>
          <tr><td>4. Teste em Container</td><td>Valida a imagem gerada.</td><td>Container validado.</td></tr>
          <tr><td>5. Push para ECR</td><td>Envia a imagem para o repositório AWS ECR.</td><td>Imagem disponível para deploy.</td></tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>Fluxo de Entrega Contínua (CD) na AWS</h2>
      <ol>
        <li><strong>EventBridge</strong> detecta o envio de nova imagem ao ECR.</li>
        <li><strong>Lambda</strong> é invocada automaticamente.</li>
        <li>A função <strong>Lambda</strong> chama a rota de deploy na <strong>EC2</strong>.</li>
        <li>A EC2 faz pull da nova imagem, para o container anterior e executa o novo.</li>
      </ol>
      <p>Resultado: deploy automatizado e validado, sem intervenção manual.</p>
    </section>

    <section>
      <h2>Diagrama do Fluxo Completo</h2>
      <pre>
[Desenvolvedor]
       |
       v
  +----------+
  |  Commit  |   <- apenas na branch `dev`
  +----------+
       |
       v
  +-----------------------------+
  | Merge: dev -> test (gatilho)|
  +-----------------------------+
       |
       v
  +--------------------------------------------------+
  |      [ CI/CD: GitHub Actions - Pipeline ]        |
  +--------------------------------------------------+
       |
       +--> 1. Executar Testes (Unitários/Integração)
       |
       +--> 2. Se sucesso: Merge automático test -> master
       |
       +--> 3. Build & Teste em Container (base master)
       |
       +--> 4. Push da Imagem Docker p/ AWS ECR
       |
       v
  +--------------------------------------------------+
  |                 [ AWS ECR ]                      |
  |        (Imagem armazenada e versionada)          |
  +--------------------------------------------------+
       |
       v
  +--------------------------------------------------+
  |              [ AWS EventBridge ]                 |
  |       (Detecta evento de push no ECR)            |
  +--------------------------------------------------+
       |
       v
  +--------------------------------------------------+
  |                [ AWS Lambda ]                    |
  |     (Invoca API de Deploy na instância EC2)      |
  +--------------------------------------------------+
       |
       v
  +--------------------------------------------------+
  |           [ AWS EC2 - API de Deploy ]            |
  |   - Pull da nova imagem                          |
  |   - Parada/remoção do container anterior          |
  |   - Execução do container atualizado              |
  +--------------------------------------------------+
       |
       v
     [ Aplicação Atualizada e em Execução ]
      </pre>
    </section>

    <section>
      <h2>Teste em Produção</h2>
      <p>
        Após o desenvolvimento do sistema de login e cadastro, ele foi implantado com sucesso na nuvem.
        A instância EC2 do front-end comunica-se corretamente com a instância de back-end,
        permitindo o registro e login com persistência completa dos dados no <strong>RDS PostgreSQL</strong>.
      </p>
    </section>
  </main>

  <footer>
    © 2025 - Sistema de Login AWS | Projeto desenvolvido por Senhor Marcos
  </footer>
</body>
</html>
